{"version":3,"file":"app.js","sources":["../../src/plugins/debug/assets/error.mp3","../../src/plugins/debug/log.js","../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js","../../src/plugins/debug/tree.js","../../src/plugins/debug/index.js","../../src/plugins/loader/index.js","../../src/plugins/assets-loader/index.js","../../src/plugins/screen/screens/main-menu/index.js","../../src/plugins/screen/screens/stream/index.js","../../src/plugins/screen/index.js","../../src/plugins/dialog-box/index.js","../../src/plugins/cloud/index.js","../../src/plugins/item/index.js","../../src/plugins/audio/index.js","../../src/plugins/animate/index.js","../../src/plugins/next/index.js","../../src/plugins/menu/index.js","../../src/plugins/term/index.js","../../src/plugins/inv/index.js","../../src/plugins/show/index.js","../../src/plugins/scene/index.js","../../src/plugins/filters/index.js","../../src/plugins/timeout/index.js","../../src/plugins/target/index.js","../../src/plugins/sound-hover/assets/menu-item.mp3","../../src/plugins/sound-hover/index.js","../../src/plugins/clear/index.js","../../src/plugins.js","../../src/main.js"],"sourcesContent":["export default \"error.mp3\"","import errorSound from './assets/error.mp3'\r\n\r\nvar error = new Howl({src: './assets/'+errorSound, volume: 1});\r\n\r\nexport default {\r\n  error: msg=>{\r\n    error.play()\r\n    console.log(`%c Error %c ${msg}`, \"color: white; background: red; font-size:12px;\", \"color: red; font-size:12px;\");\r\n  },\r\n  scene: (scene, label)=>{\r\n    console.log(`%c ${scene} %c ${label}`, \"color: #C9DAE4; background: #A0BACB; font-size:12px;\", \"background: #C9DAE4; color: #A0BACB; font-size:12px;\");\r\n  },\r\n  event: (e, msg=\"\")=>{\r\n    console.log(`%c ${e} %c ${msg} `, \"color: #C9DAE4; background: #A0BACB; font-size:12px;\", \"background: #C9DAE4; color: #A0BACB; font-size:12px;\");\r\n  },\r\n\r\n  index: version=>{\r\n    console.log(`%c vnjson.js %c v${version} `, \"color: #C9DAE4; background: #A0BACB; font-size:12px;\", \"background: #C9DAE4; color: #A0BACB; font-size:12px;\");\r\n  },\r\n  warn: msg=>{\r\n\r\n    console.log(`%c Warn %c ${msg}`, \"color: white; background: #fab52a; font-size:12px;\", \"color: #e89b00; font-size:12px;\");\r\n  },\r\n}","var e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c()}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n))}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}export default n;\n","import aside from './aside.html'\r\nimport './style.css'\r\n\r\nvar $aside = $(aside)\r\n  \r\n$($aside).insertAfter('.game')\r\n\r\n\r\n\r\nexport default function (){\r\n  \r\n\r\n\r\n  this.on('postload', ()=>{\r\n    $('#screen').mousemove(function(e) {\r\n        let top = e.pageY.toFixed();\r\n        let left = e.pageX.toFixed();\r\n        $('.vnjson__cursor-left').html(left)\r\n        $('.vnjson__cursor-top').html(top)\r\n    })  \r\n\r\nvar data = []\r\nfor(let scene in this.TREE){\r\n  let labels = Object.keys(this.TREE[scene]).filter(l=>{\r\n                let exclude =  l!=='data'&&l!=='store'&&l!=='assets'&&l!=='package'&&l!=='characters'\r\n                    return exclude\r\n               })\r\n\r\n  let node = {\r\n        text: scene, \r\n        id: scene, \r\n        state: {\r\n          opened: true,\r\n          selected: false,\r\n          disabled: true\r\n        },\r\n        children:  labels,\r\n        li_attr: {class: 'scene'},\r\n        a_attr: {id: scene, class: 'scene-item'}\r\n  }\r\n\r\n      data.push(node)\r\n \r\n\r\n}\r\n\r\n  var $vnjs = this\r\n    $(\"#vnjson__tree-root\").jstree({\r\n              core: { data },\r\n              //state: { \"key\" : \"tree\" },\r\n              //plugins: [ \"state\" ]\r\n            });\r\n\r\n    $('#vnjson__tree-root').on(\"changed.jstree\", function (e, data) {\r\n      let { action, node } = data\r\n      if(action!==\"deselect_all\"){\r\n  \r\n          $vnjs.exec({jump: [node.parent, node.text].join('.')})\r\n      }\r\n\r\n    });\r\n\r\n\r\n\r\n  })\r\n\r\n\r\n\r\n}","import log from './log.js'\r\nimport tree from './tree.js'\r\n\r\nexport default function  (){\r\n\t\r\nlog.index(this.version)\r\n//this.debug\r\nif(this.debug){\r\n  //Отсвечивае в глобальное пространсво имен\r\n  window.vnjs = this\r\n  tree.call(this);\r\n}\r\n\r\n\r\n\r\n \tthis.on('preload', _=>{\r\n \t\t//if(this.debug) log.event('<preload>', 'TREE')\r\n \t});\r\n \tthis.on('load', asset=>{\r\n \t\t//if(this.debug) console.log(asset)\r\n \t})\r\n \tthis.on('postload', _=>{\r\n \t\t//if(this.debug) log.event('</postload>')\r\n \t})\r\n \tthis.on('init', scene=>{\r\n \t\t//if(this.debug) log.scene(this.current.sceneName, this.current.labelName)\r\n \t})\r\n\r\n\tthis.on('pathNotFound', ()=>{\r\n\t\tif(this.debug){\r\n\t\t\tlog.error('{ menu } or { jump } leads nowhere');\r\n\t\t\tconsole.warn(`scene: ${this.current.sceneName}`);\r\n\t\t \tconsole.warn(`label: ${this.current.labelName}`);\r\n\t\t} \r\n\t});\r\n\tthis.on('labelEnd', ()=>{\r\n\t\t\r\n\t\t if(this.debug) log.warn(`No way out of the label [ ${this.current.labelName} ]`)\r\n\t});\r\n\r\n\tthis.on('*', id=>{\r\n\t\tif(this.debug){\r\n\t\t\t log.error(`Plugin { ${id} } not found [ ${this.current.sceneName+'.'+this.current.labelName+'.'+this.current.index} ]`)\r\n\t\t}\r\n\t});\r\n\tthis.on('assetNotFound', id=>{\r\n\t\tif(this.debug) log.error(`Asset { ${id} } not found`);\r\n\t})\r\n  this.on('screenInit', id=>{\r\n    //if(this.debug) console.log('[screen] ', id)\r\n  })\r\n\r\n\tthis.on('exec', ctx=>{\r\n\t\tif(this.debug) console.log('[ctx] ', ctx)\r\n\t});\r\n/*\r\nthis.on('init', scene=>{\r\n\thistory()\r\n})\r\nvar history = _=>{\r\n\t\r\n\tlet { labelName, sceneName, index } = this.current;\r\n\tlet pathName =`/${sceneName}/${ labelName }`\r\n\twindow.location.hash = pathName;\r\n\tthis.emit('saveData')\r\n}\r\n\r\n\r\nif(window.location.hash!==''){\r\n\tthis.emit('loadData')\r\n}\r\n\r\n*/\r\n\r\n\r\n}\r\n\r\n\r\n","import './style.sass'\r\nimport tpl from './tpl.pug'\r\n\r\nvar $tpl = $(tpl)\r\n$('#screen').append($tpl)\r\n\r\nexport default function (){\r\n\r\n  this.on('preload', ()=>{\r\n     $tpl.css('display', 'flex')\r\n  });\r\n  this.on('load', ()=>{\r\n\r\n  })\r\n  this.on('postload', ()=>{\r\n\r\n    $tpl.animate({\r\n      opacity: 0\r\n    }, 1500, ()=>{\r\n          $tpl.hide()\r\n    })\r\n\r\n  })\r\n}","export default function (){\r\n\r\n\r\n\r\n\r\nvar getAssets = _=>{\r\n  this.emit('preload')\r\nvar i = 0;\r\n\r\nvar load = _=>{\r\n  var asset = this.current.assets[i];\r\n  \r\n  if(/\\.mp3|\\.wav/i.test(asset.url)){\r\n    var sound = new Howl({src: asset.url})\r\n        sound.on('load', _=>{\r\n          this.$store[asset.name] = sound;\r\n          if( this.current.assets.length-1>=++i){\r\n            this.emit('load', asset)\r\n            load();\r\n            \r\n          }else{\r\n            this.emit('postload') \r\n          }             \r\n        });\r\n \r\n  }\r\n  else if(/\\.png|\\.jpg|.webp/i.test(asset.url)){\r\n    \r\n      let img = new Image();\r\n       img.src =  asset.url;\r\n       img.onload = ()=>{\r\n          this.$store[asset.name] = asset.url\r\n          if(this.current.assets.length-1>=++i){\r\n            this.emit('load', asset)\r\n            load();\r\n\r\n          }else{\r\n            this.emit('postload')\r\n            \r\n          };\r\n       };  \r\n  }\r\n  else{\r\n    console.log(asset.url +' Формат не поддерживается')\r\n  }\r\n};\r\n\r\nload();\r\n\r\n\r\n};\r\n\r\nvar setAllAssets = ()=>{\r\n\r\n    for(let [scene, body] of Object.entries(this.TREE)){\r\n        this.current.assets = this.current.assets.concat(body.assets);\r\n    };\r\n    getAssets();\r\n}\r\n\r\n/*\r\nthis.on('preload', scene=>{\r\n\r\n  var assets = this.TREE[this.current.sceneName].assets;\r\n  this.current.assets = this.current.assets.concat(assets);\r\n\r\n  this.emit('setAssets');\r\n})\r\n\r\n*/\r\n\r\nthis.on('setTree', _=>{\r\n\r\n  setAllAssets();\r\n\r\n});\r\n\r\n\r\n\r\n\r\n}\r\n","import \"./style.less\"\r\nimport tpl from \"./tpl.html\"\r\n\r\nexport default function (){\r\n  \r\n  $('#screen').append(tpl)\r\n  const $vnjs = this;\r\n  $('#main-menu').on('click',  '.btn', function (){\r\n      let label = $(this).data('label')\r\n      $vnjs.exec({ jump: label})\r\n  })\r\n\r\n}","import \"./style.less\";\r\nimport tpl from \"./tpl.html\"\r\n\r\nexport default function (){\r\n  $('#screen').append(tpl)\r\n  this.$store.$stream = $('#stream')\r\n}","import './style.less'\r\n\r\nimport mainMenuVnjson from './screens/main-menu/index.js'\r\nimport streamVnjson from './screens/stream/index.js'\r\n\r\nexport default function (){\r\n  \r\n  this.use(mainMenuVnjson)\r\n  this.use(streamVnjson)\r\n\r\n\r\n\r\n  var prefScreen = null\r\n\r\n  this.on('screen', id=>{\r\n    if(prefScreen&&prefScreen!==id){\r\n      $('#'+prefScreen).animate({ opacity: 0 }, 500, function(){\r\n        $(this).hide()\r\n      })\r\n      prefScreen = id\r\n      $('#'+id).css({ opacity: 1, display: 'block' })\r\n    }\r\n    else{\r\n      prefScreen = id\r\n      $('#'+id).css({ opacity: 1, display: 'block' })\r\n    }\r\n    this.$store.$screen = $('#'+id)\r\n    this.emit('screenInit', id);\r\n  })\r\n}","\r\nimport \"./style.sass\";\r\nimport tpl from \"./tpl.pug\"\r\n\r\n//import dialogBox from './assets/dialog-box.png';\r\n\r\nexport default function (){\r\n  \r\n  var $tpl = $(tpl)\r\n  this.$store.$stream.append($tpl)\r\n\r\n  /*\r\n  * Вешаем клик на диалоговое окно\r\n  */\r\n  $tpl.on('mousedown', e=>{\r\n      this.next()\r\n  });\r\n\r\n\tthis.on('character', (character, reply)=>{\r\n\t\t\tif(character.id==='$'){\r\n          $tpl.find('.dialog-box__name').html('...').css({ color: character.nameColor })\r\n          $tpl.find('.dialog-box__reply').html(reply).css({ color: character.replyColor })\r\n      }\r\n      else{\r\n          $tpl.find('.dialog-box__name').html(character.name).css({ color: character.nameColor })\r\n          $tpl.find('.dialog-box__reply').html(reply).css({ color: character.replyColor })\r\n      }\r\n\t});\r\n  this.on('dialog-box', param=>{\r\n\r\n    if(param==='clear'){\r\n       $tpl.find('.dialog-box__name').empty()\r\n       $tpl.find('.dialog-box__reply').empty()\r\n    }\r\n    else if(param){\r\n      $tpl.show()\r\n    }\r\n    else{\r\n      $tpl.hide()\r\n    }\r\n  })\r\n\r\n  this.on('hand-left', id=>{\r\n    if(id){\r\n      $tpl.find('.stream__hand-left').css('background-image', `url('${this.getAssetByName(id).url}')` )\r\n    }\r\n    else{\r\n      $tpl.find('.stream__hand-left').css('background-image', \"unset\" ) \r\n    }\r\n  })\r\n\r\n  this.on('hand-right', id=>{\r\n    if(id){\r\n      $tpl.find('.stream__hand-right').css('background-image', `url('${this.getAssetByName(id).url}')` )\r\n    }\r\n    else{\r\n      $tpl.find('.stream__hand-right').css('background-image', \"unset\" ) \r\n    }\r\n\r\n  })\r\n}\r\n","import \"./style.sass\";\r\nimport tpl from \"./tpl.pug\"\r\n\r\n\r\nexport default function (){\r\n\r\n  var $tpl = $(tpl)\r\n\r\n  this.$store.$stream.append($tpl)\r\n  this.on('cloud', param=>{\r\n    $tpl.empty()\r\n    $tpl.css('display', 'flex')\r\n\r\n    if(param){\r\n      if(param.css){ $tpl.css(param.css) }\r\n      Object.keys(param.tags).map(label=>{\r\n            let item = `<div class=\"tag sound-hover\" data-label=${label}>${param.tags[label]}</div>`\r\n            $tpl.append(item)\r\n      })\r\n\r\n      let $vnjs = this;\r\n      $tpl.on('click', '.tag', function (){\r\n        let label = $(this).data('label')\r\n        $vnjs.exec({ jump: label })\r\n      })\r\n    }\r\n    else{\r\n      $tpl.hide()\r\n    }\r\n  })\r\n}","export default function (){\r\n\r\n  this.on('set-item', id=>{\r\n\r\n        var asset = this.TREE.$items.store.filter(asset=>asset.id===id)[0]\r\n        \r\n        if(asset){\r\n            var status = 'sortable-drag'\r\n\r\n            let storeItem = $(` <div class=\"inv__cell sound-hover ${status}\" data-type=\"${asset.type}\"></div>`)\r\n            storeItem.css('background-image', `url(${this.getAssetByName(asset.id).url})`)\r\n            $('#inventar').append(storeItem)\r\n        }\r\n\r\n\r\n  })\r\n\r\n}","\r\nexport default function (){\r\n\r\nvar audio = data=>{\r\n  Object.values(this.$store).map(asset=>{\r\n        if(asset.hasOwnProperty(\"_muted\") ){\r\n          asset.stop()\r\n        }\r\n  })\r\n\tif(typeof data==='string'){\r\n\t\r\n\t\tthis.$store[data].play();\r\n\r\n\t}\r\n\telse{\r\n\t\tthis.$store[data.name].rate(data.speed||1);\r\n\t\tthis.$store[data.name].loop(data.loop||false);\r\n\t\tthis.$store[data.name].volume(data.volume||1)\r\n\t\tthis.$store[data.name][data.action]();\r\n\t}\r\n\r\n}\r\n\r\n\tthis.on('audio', audio);\r\n\tthis.on('sound', data=>{\r\n\t\tthis.$store[data].volume(0.05)\r\n\t\tthis.$store[data].play();\r\n\r\n\t})\r\n};","\r\n//https://api.jquery.com/animate/\r\n\r\nexport default function (){\r\n\r\n  this.on('animate', data=>{\r\n    let { selector, duration, css } = data\r\n    $(selector).animate(css, duration)\r\n  })\r\n  \r\n}","export default function (){\r\n  this.on('next', this.next)\r\n}","\r\nimport \"./style.sass\";\r\nimport tpl from \"./tpl.html\"\r\n\r\n\r\nexport default function (){\r\n\r\n  var $tpl = $(tpl)\r\n  this.$store.$stream.append($tpl)\r\n\r\n  this.on('menu', menu);\r\n\r\n  function menu (menuObj){\r\n\r\n    $tpl.find('.stream__menu-menu').empty() \r\n    $tpl.css({display: 'flex'});\r\n\r\n\r\n    for(var [label, menuItem ] of Object.entries(menuObj)){\r\n      var character = this.getCharacterById(label)\r\n\r\n      if(character){\r\n        var str = null\r\n        if(label==='$'){\r\n            character.name = '';\r\n        }\r\n        if(character.name!==''){\r\n            str = `<div class=\"stream__menu-quetion\">\r\n                          <span style='color:${character.nameColor}; padding-right: 20px;'>${ character.name }:</span>\r\n                          <span style='color:${character.replyColor}; '>${ menuItem }</span>\r\n                    </div>`;\r\n        }\r\n        else{\r\n            str = `<div class=\"stream__menu-quetion\">\r\n                          <span style='color:${character.replyColor};'>${ menuItem }</span>\r\n                    </div>`;\r\n        }\r\n\r\n        $('.stream__menu-menu').append(str)\r\n\r\n      }\r\n      else{\r\n        let str = null\r\n        if(label===\"disabled\"){\r\n            str = `<div data-label=\"${ label }\" class=\"stream__menu-item disabled\"><span class=\"sound-hover\">${ menuItem }</span></div>`;\r\n        }\r\n        else if(label===\"target\"){\r\n          let mark = Object.keys(menuItem)[0]\r\n\r\n          let text = menuItem[mark]\r\n          str = `<div data-label=\"target\" data-mark=\"${ mark }\" class=\"stream__menu-item\"><span class=\"sound-hover\">${ text }</span></div>`;\r\n        }\r\n        else{\r\n            str = `<div data-label=\"${ label }\" class=\"stream__menu-item\"><span class=\"sound-hover\">${ menuItem }</span></div>`;\r\n        }\r\n        \r\n        $('.stream__menu-menu').append($(str))\r\n      }\r\n    }\r\n\r\nlet $vnjs = this\r\n\r\nfunction clickHundler(){\r\n    let label = $(this).data('label')\r\n    if(label==='next'){\r\n      $vnjs.exec({ next: true })\r\n    }\r\n    else if(label==='target'){\r\n      let mark = $(this).data('mark')\r\n\r\n      $vnjs.exec({ target: mark })\r\n    }\r\n    else{\r\n      $vnjs.exec({ jump: label }) \r\n    }\r\n\r\n\r\n    $('.stream__menu-menu').off( \"click\", clickHundler)\r\n    $('.stream__menu').hide();\r\n}\r\n\r\n$(\".stream__menu-menu\").on(\"click\", \".stream__menu-item\", clickHundler);\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n}","import \"./style.sass\";\r\nimport tpl from \"./tpl.html\"\r\n\r\ndocument.addEventListener('DOMContentLoaded', ()=>{\r\n    hljs.highlightAll();\r\n})\r\n/**/\r\nexport default function (){\r\n\r\n  var $tpl = $(tpl)\r\n  this.$store.$stream.append($tpl)\r\n\r\n  this.on('term', param=>{\r\n    if( typeof(param)==='object' ){\r\n      $($tpl).show()\r\n\r\n      var code = JSON.parse( this.TREE[this.current.sceneName].data[param.data] )\r\n   \r\n      var html = hljs.highlight(code, { language: param.lang }).value\r\n      $tpl.find('pre code').html(html) \r\n    }\r\n    else if( typeof(param)==='string' ){\r\n      console.log('22233'+param)\r\n    }\r\n    else{\r\n      $($tpl).hide()\r\n    }\r\n  })\r\n}","\r\nimport \"./style.less\";\r\nimport tpl from \"./tpl.html\"\r\n\r\n\r\nexport default function (){\r\n  var $tpl = $(tpl)\r\n  this.$store.$stream.append($tpl)\r\n\r\n  this.on('postload', ()=>{\r\n    this.TREE.$items.store.map(asset=>{\r\n        var status = 'sortable-drag'\r\n        var target = null\r\n        if(asset.disabled){\r\n          status = \"hide\"\r\n        }\r\n        if(asset.target){\r\n          target = asset.target.join(\"__\")\r\n        }\r\n        let storeItem = $(` <div class=\"inv__cell sound-hover ${status}\" data-type=\"${asset.type}\" data-target=\"${target}\" id=\"${asset.id}\"></div>`)\r\n        storeItem.css('background-image', `url(${this.getAssetByName(asset.id).url})`)\r\n        $tpl.find('#inventar').append(storeItem)\r\n    })\r\n  })\r\n\r\n  this.on('inv', show=>{\r\n    if(show){\r\n      $tpl.show()\r\n\r\n    }\r\n    else{\r\n      $tpl.hide();\r\n    }\r\n  })\r\n  function checkUnity(chunks){\r\n    var $chunks = chunks.toArray()\r\n    var target = $($chunks[0]).data('target')\r\n   \r\n\r\n    let isUnity = $chunks.filter(chunk=>{\r\n                      return target===$(chunk).data('target')\r\n                  }).length===4;\r\n    if(isUnity){\r\n      $('#'+target).appendTo('.inventar__unity').show(100)\r\n    }\r\n\r\n  }\r\n\r\n\r\n  function onAdd (e){\r\n             let typeItem = $(e.item).data('type')\r\n             let typeTarget = $(e.to).data('type')\r\n             if(typeTarget!==typeItem){\r\n                var i = e.item\r\n                $(e.item).attr('dragable', true)\r\n                $(e.item).remove()\r\n                $(e.from).append(i)\r\n             }\r\n             //item.type===item.type\r\n             else{\r\n                let chunks = $(e.to).children()\r\n                if(chunks.length===4){\r\n                  checkUnity(chunks)\r\n                }\r\n\r\n             }\r\n  }\r\n \r\n\r\n      Sortable.create(document.querySelector('#inventar'), \r\n        {\r\n          group: {\r\n            name: 'inv',\r\n            put: ['cloth', 'accessor', 'equip', 'craft']\r\n          },\r\n          animation: 150,\r\n        })\r\n        Sortable.create(document.querySelector('.inventar__cloth'), \r\n        {\r\n          group: {\r\n            name: 'cloth',\r\n            pull: 'inv',\r\n            put: (to)=>{\r\n              return to.el.children.length<4\r\n            }\r\n          },\r\n          animation: 150,\r\n          onAdd\r\n        })\r\n        Sortable.create(document.querySelector('.inventar__accessor'), \r\n        {\r\n          group: {\r\n            name: 'accessor',\r\n            pull: 'inv',\r\n            put: (to)=>{\r\n              return to.el.children.length<4\r\n            }\r\n          },\r\n          animation: 150,\r\n          onAdd\r\n        })\r\n        Sortable.create(document.querySelector('.inventar__equip'), \r\n        {\r\n          group: {\r\n            name: 'equip',\r\n            pull: 'inv',\r\n            put: (to)=>{\r\n              return to.el.children.length<4\r\n            },\r\n          },\r\n          animation: 150,\r\n          onAdd\r\n\r\n        })\r\n        Sortable.create(document.querySelector('.inventar__craft'), \r\n        {\r\n          group: {\r\n            name: 'craft',\r\n            pull: 'inv',\r\n            put: (to)=>{\r\n              return to.el.children.length<4\r\n            }\r\n          },\r\n          animation: 150,\r\n          onAdd,\r\n          onMove: ()=>{\r\n            $('.inventar__unity').children().hide(200)\r\n          }\r\n        })\r\n\r\n}","import \"./style.less\";\r\nimport tpl from \"./tpl.html\"\r\n\r\nexport default function (){\r\n\r\n  var $tpl = $(tpl)\r\n\r\n  this.$store.$stream.append($tpl)\r\n\r\n  this.on('left', id=>{\r\n    if(id){    \r\n      $tpl.find('.stream__show-left').css('background-image', `url('${this.getAssetByName(id).url}')` )\r\n    }\r\n    else{\r\n       $tpl.find('.stream__show-left').css('background-image', 'unset')\r\n    }\r\n  })\r\n  this.on('center', id=>{\r\n    if(id){\r\n      $tpl.find('.stream__show-center').css('background-image', `url('${this.getAssetByName(id).url}')` )\r\n    }\r\n    else{\r\n      $tpl.find('.stream__show-center').css('background-image', 'unset')\r\n    }\r\n  })\r\n  this.on('right', id=>{\r\n    if(id){\r\n      $tpl.find('.stream__show-right').css('background-image', `url('${this.getAssetByName(id).url}')` )\r\n    }\r\n    else{\r\n      $tpl.find('.stream__show-right').css('background-image', 'unset')\r\n    }\r\n  })\r\n  this.on('show', param=>{\r\n     $tpl.find('.stream__show-position')\r\n        .css('background-image', `url('${this.getAssetByName(id).url}')` )\r\n        .css(param.css)\r\n  })\r\n}","import \"./style.less\"\r\nimport tpl from './tpl.html'\r\n\r\nexport default function (){\r\n  var $tpl = $(tpl)\r\n  this.$store.$stream.append($tpl)\r\n\r\n  this.on('scene', id=>{\r\n    $tpl.css({\r\n      'background-image': `url('${this.getAssetByName(id).url}')`,\r\n      'transition': '0.5s'\r\n    })\r\n  })\r\n\r\n\r\n}","export default function (){\r\n\r\n\r\n\r\n  this.on('blur', (obj)=>{\r\n    $(obj.selector).css('filter', `blur(${obj.value}px)` )\r\n  })\r\n\r\n\r\n}","export default function (){\r\n\r\n  this.on('timeout', param=>{    \r\n    setTimeout(()=>{\r\n      for(let event in param.action)\r\n      this.exec({ [event]: param.action[event] })\r\n    }, param.timer)\r\n  })\r\n}","export default function (){\r\n\r\n  this.on('target', mark=>{\r\n    \r\n    var index = this.getCurrentLabelBody()\r\n                    .map( ctx=>ctx['_mark'])\r\n                    .indexOf(mark)\r\n    console.log(index)                    \r\n    let label = [ this.current.sceneName, this.current.labelName, index ].join('.')\r\n    \r\n    this.exec({jump: label})\r\n  })\r\n\r\n}","export default \"menu-item.mp3\"","import menuItemSound from './assets/menu-item.mp3'\r\n\r\nexport default function (){\r\n\r\n  var itemSound = new Howl({src: './assets/'+menuItemSound, volume: 0.1});\r\n\r\n  $('#screen').on('mouseover', '.sound-hover', function (){\r\n       itemSound.play()\r\n  })\r\n \r\n\r\n}","export default function (){\r\n\r\n  this.on('clear', param=>{\r\n    if(param==='all'){\r\n      $('.component').toArray().map(component=>{\r\n        $(component).hide()\r\n      })\r\n      $('.layer').toArray().map(layer=>{\r\n        $(layer).hide()\r\n      })\r\n      Object.values(this.$store).map(asset=>{\r\n        if(asset.hasOwnProperty(\"_muted\") ){\r\n          asset.stop()\r\n        }\r\n      })\r\n    }\r\n    /*\r\n    if(param==='components'){\r\n\r\n    }*/\r\n  })\r\n}","import debug              from './plugins/debug/index.js'\r\nimport loader             from './plugins/loader/index.js'\r\nimport assetsLoader       from './plugins/assets-loader/index.js'\r\nimport screen             from './plugins/screen/index.js'\r\nimport dialogBox          from './plugins/dialog-box/index.js'\r\nimport cloud              from './plugins/cloud/index.js'\r\nimport item               from './plugins/item/index.js'\r\nimport audio              from './plugins/audio/index.js'\r\nimport animate            from './plugins/animate/index.js'\r\nimport next               from './plugins/next/index.js'\r\n\r\nimport menu               from './plugins/menu/index.js'\r\nimport term               from './plugins/term/index.js'\r\nimport inv                from './plugins/inv/index.js'\r\nimport show               from './plugins/show/index.js'\r\nimport scene              from './plugins/scene/index.js'\r\nimport filters            from './plugins/filters/index.js'\r\nimport timeout            from './plugins/timeout/index.js'\r\nimport target             from './plugins/target/index.js'\r\nimport soundHover         from './plugins/sound-hover/index.js'\r\nimport clear              from './plugins/clear/index.js'\r\n\r\n\r\nexport default function(){\r\n  this.use(assetsLoader)\r\n  this.use(loader)\r\n  this.use(screen)\r\n  this.use(debug)\r\n  this.use(scene)\r\n  this.use(show)\r\n  this.use(filters)\r\n  this.use(timeout) \r\n  this.use(target)\r\n  this.use(item)\r\n  this.use(audio)\r\n  this.use(animate)\r\n  this.use(next)\r\n\r\n  this.use(menu)\r\n  this.use(term)\r\n  this.use(inv)\r\n  this.use(cloud)\r\n  this.use(dialogBox)\r\n  this.use(soundHover)\r\n  this.use(clear)\r\n}","import plugins from './plugins.js'\r\n\r\n\r\n/**\r\n * Загрузка игры\r\n */\r\nfetch(`scenes/vn.json`)\r\n  .then(r=>r.json())\r\n  .then(tree=>init(tree))\r\n\r\nfunction init (tree){\r\n  var debug = tree.$root.package.debug\r\n\r\n\r\nvar vnjs = new Vnjson({ debug })\r\n    plugins.call(vnjs)\r\n\r\n      vnjs.setTree(tree)\r\n      vnjs.on('postload', ()=>{\r\n          vnjs.exec({'jump': '$root.$init'})\r\n      })\r\n      vnjs.on('init', ()=>vnjs.exec())\r\n\r\n}"],"names":["error","Howl","src","errorSound","volume","msg","play","console","log","scene","label","event","e","index","version","warn","t","n","r","document","a","s","prepend","d","singleTag","i","container","querySelector","getElementsByTagName","u","indexOf","push","c","charCodeAt","substring","styleSheet","cssText","appendChild","createTextNode","createElement","setAttribute","attributes","Object","keys","length","insertAdjacentElement","$aside","$","aside","insertAfter","on","mousemove","top","pageY","toFixed","left","pageX","html","data","TREE","labels","filter","l","exclude","node","text","id","state","opened","selected","disabled","children","li_attr","class","a_attr","$vnjs","jstree","core","action","exec","jump","parent","join","debug","window","vnjs","tree","call","_","asset","current","sceneName","labelName","ctx","$tpl","tpl","append","css","animate","opacity","hide","getAssets","emit","load","assets","test","url","sound","$store","name","img","Image","onload","setAllAssets","body","entries","concat","$stream","use","mainMenuVnjson","streamVnjson","prefScreen","display","$screen","next","character","reply","find","color","nameColor","replyColor","param","empty","show","getAssetByName","tags","map","item","$items","store","status","storeItem","type","audio","values","hasOwnProperty","stop","rate","speed","loop","selector","duration","menu","menuObj","menuItem","getCharacterById","str","mark","clickHundler","target","off","addEventListener","hljs","highlightAll","code","JSON","parse","highlight","language","lang","value","checkUnity","chunks","$chunks","toArray","isUnity","chunk","appendTo","onAdd","typeItem","typeTarget","to","attr","remove","from","Sortable","create","group","put","animation","pull","el","onMove","obj","setTimeout","timer","getCurrentLabelBody","itemSound","menuItemSound","component","layer","assetsLoader","loader","screen","filters","timeout","term","inv","cloud","dialogBox","soundHover","clear","fetch","then","json","init","$root","package","Vnjson","plugins","setTree"],"mappings":"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"}